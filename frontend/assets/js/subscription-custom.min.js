var success_img=customVars.basedir+"/frontend/assets/images/true.png",loader_gif=customVars.basedir+"/frontend/assets/images/loading.gif",error_img=customVars.basedir+"/frontend/assets/images/false.png",url=customVars.ajaxurl;function validatePaymentForm(t,e){if(!1===e.checkValidity()){jQuery(e).find(":invalid").each(function(t,e){jQuery(e).nextAll("div.invalid-feedback").show()});return t.preventDefault(),t.stopPropagation(),e.classList.add("invalid"),!1}return jQuery("div.invalid-feedback").hide(),e.classList.add("valid"),!0}function showSnacksBar(t){var e=document.getElementById("snackbar");e.className="show",t||(e.className=e.className.replace("show",""))}jQuery(document).ready(function(){!function(t){if(t(".sameSize, .sameSize-inner").matchHeight({byRow:!0,property:"height",target:null,remove:!1}),t(".sameSize-inner").matchHeight({byRow:!0,property:"height",target:null,remove:!1}),t("#card_number").length){var e="";t("#card_number").validateCreditCard(function(o){o.valid?t(this).addClass("valid"):t(this).removeClass("valid"),void 0!==o.card_type&&null!=o.card_type&&""!=o.card_type.name?(""!=e&&e!=o.card_type.name&&(t(this).removeClass(e),t(this).addClass(o.card_type.name)),e=o.card_type.name,t(this).addClass(o.card_type.name)):null==o.card_type&&""!=e&&t(this).removeClass(e)})}function o(e){var o=t(document).height();e?t("body").append("<div id='overlay'></div>"):t("div#overlay").remove(),t("#overlay").height(o).css({opacity:.4,position:"absolute",top:0,left:0,"background-color":"black",width:"100%","z-index":5e3})}t(".select_plan").each(function(e){t(this).on("click",function(e){e.preventDefault();var o=t(this).data("subscriptionid");t("form#form_"+o).submit()})}),t("#validate_coupon").on("click",function(e){if(e.preventDefault(),t(this).prop("disabled",!0),t("#coupon_code").val()){var o=t(this).data("action"),a=t(this).data("nonce");t(".coupon-responce").show(),t(".coupon-responce").html('<img class="activation-img" src="'+loader_gif+'">');var n=t.post(url,{action:o,coupon:t("#coupon_code").val(),nonce:a});n.done(function(e){t(this).prop("disabled",!1),t(".coupon-responce").html('<img class="activation-img" src="'+success_img+'">'),t(".coupon-messages-notices").removeClass("error").addClass("success").html('<p class="mb-0">'+e.data.message+"</p>")}),n.fail(function(e){t(this).prop("disabled",!1),t(".coupon-responce").html('<img class="activation-img" src="'+error_img+'">'),t(".coupon-messages-notices").removeClass("success").addClass("error").html('<p class="mb-0">'+e.responseJSON.data.message+"</p>")})}else t(".messages-notices").html('<p class="error">Please add coupon code</p>')}),t("button#submit_cc").on("click",function(e){if(e.preventDefault(),validatePaymentForm(e,t("#form_payment")[0])){o(!0),showSnacksBar(!0);var a=t(this).data("action"),n=t("#nonce").val(),s=t("#form_payment").serialize();t("#snackbar").html("Sending your request...");var i=t.post(url,{action:a,formData:s,nonce:n});i.done(function(e){o(!1),showSnacksBar(!1),t(".cc-messages-notices").removeClass("error").addClass("success").html("<p>Payment Received...Please wait...</p>"),window.location.href=t("#form_payment").attr("action");var a=t("#form_payment").attr("action"),s=t('<form action="'+a+'" method="post"><input type="hidden" name="thankyou" value="'+n+'" /></form>');t("body").append(s),s.submit()}),i.fail(function(e){o(!1),showSnacksBar(!1),t(".cc-messages-notices").removeClass("success").addClass("error").html('<p class="mb-0">'+e.responseJSON.data.message+"</p>")})}}),t("button#complete_payment").on("click",function(e){e.preventDefault();t("#form_complete_payment")[0];o(!0),showSnacksBar(!0);var a=t(this).data("action"),n=t("#nonce").val(),s=t("#form_complete_payment").serialize();t("#snackbar").html("Sending your request...");var i=t.post(url,{action:a,formData:s,nonce:n});i.done(function(e){o(!1),showSnacksBar(!1),t(".cc-messages-notices").removeClass("error").addClass("success").html("<p>Payment Received...Please wait...</p>"),window.location.href=t("#form_payment").attr("action");var a=t("#form_complete_payment").attr("action"),s=t('<form action="'+a+'" method="post"><input type="hidden" name="thankyou" value="'+n+'" /></form>');t("body").append(s),s.submit()}),i.fail(function(e){o(!1),showSnacksBar(!1),t(".cc-messages-notices").removeClass("success").addClass("error").html('<p class="mb-0">'+e.responseJSON.data.message+"</p>")})}),t("button#update_cc").on("click",function(e){if(e.preventDefault(),validatePaymentForm(e,t("#form_payment")[0])){o(!0),showSnacksBar(!0);var a=t(this).data("action"),n=t("#nonce").val(),s=t("#form_payment").serialize();t("#snackbar").html("Sending your request...");var i=t.post(url,{action:a,formData:s,nonce:n});i.done(function(e){t("#snackbar").html("Your details are upto date...Please wait..."),t(".cc-messages-notices").removeClass("error").addClass("success").html("<p>Your details are upto date...Please wait...</p>"),window.location.href=t("#form_payment").attr("action");var o=t("#form_payment").attr("action"),a=t('<form action="'+o+'" method="post"><input type="hidden" name="payment-profile" value="'+n+'" /></form>');t("body").append(a),a.submit()}),i.fail(function(e){t("#snackbar").html("Something went wrong..."),t(".cc-messages-notices").removeClass("success").addClass("error").html('<p class="mb-0">'+e.responseJSON.data.message+"</p>")})}setTimeout(function(){o(!1),showSnacksBar(!1)},3e3)}),t("#update_subscription_button").confirm({content:"Click button below to confirm subscripition change.",boxWidth:"350px",useBootstrap:!1,theme:"custom",animation:"zoom",closeAnimation:"scale",typeAnimated:!0,buttons:{CONFIRM:{text:"CONFIRM",btnClass:"btn btn-secondary btn-ds-secondary",action:function(){var e=t(".update_subscription_id").val(),o=t("#update_subscription_button").data("action"),a=t("#update_subscription_button").data("nonce"),n=t.post(url,{action:o,subscription_id:e,nonce:a});t.alert({title:"Update Subscription",boxWidth:"350px",columnClass:"loader",useBootstrap:!1,theme:"custom",animation:"zoom",closeAnimation:"scale",typeAnimated:!0,content:'<img class="activation-img pt-3 pb-3" src="'+loader_gif+'"><p class="text-center"> Processing....</p>'}),setTimeout(function(){t(".jconfirm-buttons").hide()},10),n.done(function(e){t(".jconfirm-buttons button").trigger("click"),t.alert({title:"Update Subscription",boxWidth:"350px",columnClass:"loader",useBootstrap:!1,theme:"custom",animation:"zoom",closeAnimation:"scale",typeAnimated:!0,content:'<h4>Thank You!</h4><p class="mb-0">Your Package is updated successfully.</p>'}),setTimeout(function(){t(".jconfirm-buttons button").on("click",function(){window.location.reload()})},10)}),n.fail(function(e){t(".jconfirm-buttons button").trigger("click"),t.alert({title:"Update Subscription",boxWidth:"350px",columnClass:"loader",useBootstrap:!1,theme:"custom",animation:"zoom",closeAnimation:"scale",typeAnimated:!0,content:'<h4> Error</h4><p class="mb-0">'+e.responseJSON.data.message+"</p>"}),setTimeout(function(){t(".jconfirm-buttons button").on("click",function(){window.location.reload()})},10)})}},CANCLE:{text:"CANCEL"}}}),t("#cancel_subscription_button").confirm({content:"Click button below to confirm cancel Subscription.",boxWidth:"350px",useBootstrap:!1,theme:"custom",animation:"zoom",closeAnimation:"scale",typeAnimated:!0,buttons:{CONFIRM:{text:"CONFIRM",btnClass:"btn btn-secondary btn-ds-secondary",action:function(){var e=t("#cancel_subscription_button").data("action"),o=t("#cancel_subscription_button").data("nonce"),a=t.post(url,{action:e,nonce:o});t.alert({title:"Update Subscription",boxWidth:"350px",columnClass:"loader",useBootstrap:!1,theme:"custom",animation:"zoom",closeAnimation:"scale",typeAnimated:!0,content:'<img class="activation-img pt-3 pb-3" src="'+loader_gif+'"><p class="text-center"> Processing....</p>'}),setTimeout(function(){t(".jconfirm-buttons").hide()},10),a.done(function(e){t(".jconfirm-buttons button").trigger("click"),t.alert({title:"Update Subscription",boxWidth:"350px",columnClass:"loader",useBootstrap:!1,theme:"custom",animation:"zoom",closeAnimation:"scale",typeAnimated:!0,content:"<p>We have received your request to cancel your subscription. Your subscription will automatically cancel at the end of your trial period.</p>"}),setTimeout(function(){t(".jconfirm-buttons button").on("click",function(){window.location.reload()})},10)}),a.done(function(e){t(".jconfirm-buttons button").trigger("click"),t.alert({title:"Update Subscription",boxWidth:"350px",columnClass:"loader",useBootstrap:!1,theme:"custom",animation:"zoom",closeAnimation:"scale",typeAnimated:!0,content:'<h4>Thank You!</h4><p class="mb-0">Your Package is updated successfully.</p>'}),setTimeout(function(){t(".jconfirm-buttons button").on("click",function(){window.location.reload()})},10)}),a.fail(function(e){t(".jconfirm-buttons button").trigger("click"),t.alert({title:"Update Subscription",boxWidth:"350px",columnClass:"loader",useBootstrap:!1,theme:"custom",animation:"zoom",closeAnimation:"scale",typeAnimated:!0,content:'<h4>Error</h4><p class="mb-0">'+e.responseJSON.data.message+"</p>"}),setTimeout(function(){t(".jconfirm-buttons button").on("click",function(){window.location.reload()})},10)})}},CANCLE:{text:"CANCEL"}}}),t(".open-channel-detail-modal").on("click",function(){var e=t(this).data("channel-title"),o=t(this).data("channel-description"),a=t(this).data("channel-actors"),n=t(this).data("channel-directors"),s=t(this).data("channel-image");const i=a&&a.length&&a.join(", "),c=n&&n.length&&n.join(", ");var r=t("#channel-detail-modal");r.find(".modal_description_buffer").addClass("hidden"),r.find(".modal_director_actor_buffer").addClass("hidden"),r.find(".modal_actors_title").addClass("hidden"),r.find(".modal_directors_title").addClass("hidden"),r.find(".modal_channel_description").text(""),r.find(".modal_channel_actors").text(""),r.find(".modal_channel_directors").text(""),r.find(".modal_channel_title").text(e),r.find(".modal_channel_image").attr("src",s),o&&o.length&&(r.find(".modal_description_buffer").removeClass("hidden"),r.find(".modal_channel_description").text(o)),(i||c)&&(r.find(".modal_director_actor_buffer").removeClass("hidden"),i&&(r.find(".modal_channel_actors").text(i),r.find(".modal_actors_title").removeClass("hidden")),c&&(r.find(".modal_channel_directors").text(c),r.find(".modal_directors_title").removeClass("hidden"))),t("#channel-detail-modal").appendTo("body").modal("show")}),t(".product-buy-now").on("click",function(e){e.preventDefault();var o=t(this).data("productid");t("form#form_"+o).submit()})}(jQuery)});